
<!DOCTYPE html>
<html lang="zh-cn,en,default">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Salmons&#39;s Pool">
    <title>iOSæ•°æ®æŒä¹…åŒ– - Salmons&#39;s Pool</title>
    <meta name="author" content="Salmons">
    
    
        <link rel="icon" href="http://salmons.info/assets/images/favicon.ico">
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Salmons","sameAs":[],"image":"favicon.ico"},"articleBody":"å¤§å¤šæ•°appåº”ç”¨éƒ½éœ€è¦ä¾é™„å®¢æˆ·ç«¯ç¼“å­˜ï¼Œè¿™å°±æ˜¯æ•°æ®æŒä¹…åŒ–ï¼ŒæŠŠæ•°æ®å­˜åˆ°æ‰‹æœºä¸­ï¼Œappä¸‹æ¬¡é‡å¯æ—¶å€™å¯ä»¥ç›´æ¥è®¿é—®æœ¬åœ°æ•°æ®ï¼Œä¾‹å¦‚æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„å¾®ä¿¡èŠå¤©è®°å½•ï¼Œåœ¨æ–­ç½‘æƒ…å†µä¸‹æˆ‘ä»¬ä¾ç„¶å¯ä»¥æŸ¥çœ‹èŠå¤©è®°å½•ï¼Œä»¥ä¸‹æ˜¯iOSæ•°æ®æŒä¹…åŒ–çš„è§£å†³æ–¹æ¡ˆï¼š\n\nplistæ–‡ä»¶ï¼ˆå±æ€§åˆ—è¡¨ï¼‰\nNSUserDefaultï¼ˆåå¥½è®¾ç½®ï¼‰\nNSKeyedArchiverï¼ˆå½’æ¡£ï¼‰ \nSQLite3ã€CoreDataï¼ˆæ•°æ®åº“ï¼‰\nSQLite3\nFMDB\nCoreData\n\n\n\nå…ˆä»‹ç»ä¸€ä¸‹æ²™ç›’çš„æ¦‚å¿µï¼ŒiOSç¨‹åºé»˜è®¤æƒ…å†µä¸‹åªèƒ½è®¿é—®ç¨‹åºè‡ªå·±çš„ç›®å½•ï¼Œè¿™ä¸ªç›®å½•å°±å«æ²™ç›’ã€‚\næ²™ç›’çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š\n&quot;AppName.appåŒ…&quot;\nDocuments\nLibrary\n    Caches\n    Preferences\ntmp\nAppName.app: è¿™æ˜¯åº”ç”¨ç¨‹åºçš„ç¨‹åºåŒ…ç›®å½•ï¼ŒåŒ…å«åº”ç”¨ç¨‹åºçš„æœ¬èº«ã€‚ç”±äºåº”ç”¨ç¨‹åºå¿…é¡»ç»è¿‡ç­¾åï¼Œæ‰€ä»¥æ‚¨åœ¨è¿è¡Œæ—¶ä¸èƒ½å¯¹è¿™ä¸ªç›®å½•ä¸­çš„å†…å®¹è¿›è¡Œä¿®æ”¹ï¼Œå¦åˆ™å¯èƒ½ä¼šä½¿åº”ç”¨ç¨‹åºæ— æ³•å¯åŠ¨ã€‚\nDocuments: æœ€å¸¸ç”¨çš„ç›®å½•ï¼ŒiTunesåŒæ­¥è¯¥åº”ç”¨æ—¶ä¼šåŒæ­¥æ­¤æ–‡ä»¶å¤¹ä¸­çš„å†…å®¹ï¼Œé€‚åˆå­˜å‚¨é‡è¦æ•°æ®ã€‚è·¯å¾„è·å–\nNSString *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).firstObject;\nLibrary/Caches: iTunesä¸ä¼šåŒæ­¥æ­¤æ–‡ä»¶å¤¹ï¼Œé€‚åˆå­˜å‚¨ä½“ç§¯å¤§ï¼Œä¸éœ€è¦å¤‡ä»½çš„éé‡è¦æ•°æ®ã€‚\nNSString *path = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES).firstObject;\nLibrary/Preferences: iTunesåŒæ­¥è¯¥åº”ç”¨æ—¶ä¼šåŒæ­¥æ­¤æ–‡ä»¶å¤¹ä¸­çš„å†…å®¹ï¼Œé€šå¸¸ä¿å­˜åº”ç”¨çš„è®¾ç½®ä¿¡æ¯ã€‚\nåŒ…å«åº”ç”¨ç¨‹åºçš„åå¥½è®¾ç½®æ–‡ä»¶ã€‚æ‚¨ä¸åº”è¯¥ç›´æ¥åˆ›å»ºåå¥½è®¾ç½®æ–‡ä»¶ï¼Œè€Œæ˜¯åº”è¯¥ä½¿ç”¨NSUserDefaultsç±»æ¥å–å¾—å’Œè®¾ç½®åº”ç”¨ç¨‹åºçš„åå¥½.\ntmp: iTunesä¸ä¼šåŒæ­¥æ­¤æ–‡ä»¶å¤¹ï¼Œç³»ç»Ÿå¯èƒ½åœ¨åº”ç”¨æ²¡è¿è¡Œæ—¶å°±åˆ é™¤è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œæ‰€ä»¥æ­¤ç›®å½•é€‚åˆä¿å­˜åº”ç”¨ä¸­çš„ä¸€äº›ä¸´æ—¶æ–‡ä»¶ï¼Œç”¨å®Œå°±åˆ é™¤ã€‚\nNSString *path = NSTemporaryDirectory();\n\nplistæ–‡ä»¶ å±æ€§åˆ—è¡¨plistæ–‡ä»¶æ˜¯å°†ç‰¹å®šç±»é€šè¿‡XMLæ–¹å¼ä¿å­˜åˆ°æ–‡ä»¶çš„\nåªæœ‰ä»¥ä¸‹ç±»å‹æ‰èƒ½ä½¿ç”¨plistæ–‡ä»¶å­˜å‚¨ï¼š\nNSArray;\nNSMutableArray;\nNSDictionary;\nNSMutableDictionary;\nNSData;\nNSMutableData;\nNSString;\nNSMutableString;\nNSNumber;\nNSDate;\n\n//1.è·å–æ–‡ä»¶è·¯å¾„\nNSString *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).firstObject;\nNSString *fileName = [path stringByAppendingPathComponent:@&quot;a.plist&quot;];\n\n//2.å­˜å‚¨\n//å°†atomicallyè®¾ç½®æˆYESï¼Œä»£è¡¨å…ˆå†™å…¥è¾…åŠ©æ–‡ä»¶ï¼Œå†æŠŠè¾…åŠ©æ–‡ä»¶æ‹·è´åˆ°ç›®æ ‡æ–‡ä»¶åœ°å€ï¼Œå®‰å…¨è€ƒè™‘ï¼Œè®¾ç½®æˆYES\nNSArray *array = @[@&quot;123&quot;, @&quot;456&quot;, @&quot;789&quot;];\n[array writeToFile:fileName atomically:YES];\n\n//3.è¯»å–\nNSArray *result = [NSArray arrayWithContentsOfFile:fileName];\nNSLog(@&quot;%@&quot;, result);\n\nNSUSerDefaultï¼ˆåå¥½è®¾ç½®ï¼‰//1.è·å¾—NSUserDefaultsæ–‡ä»¶\nNSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];\n\n//2.å‘æ–‡ä»¶ä¸­å†™å…¥å†…å®¹,å†™å…¥å¯¹è±¡ï¼ŒåŸºæœ¬ç±»å‹\n[userDefaults setObject:@&quot;Object&quot; forKey:@&quot;obj&quot;];\n[userDefaults setBool:YES forKey:@&quot;sex&quot;];\n[userDefaults setInteger:10 forKey:@&quot;age&quot;];\n//2.1ç«‹å³åŒæ­¥\n[userDefaults synchronize];\n\n//3.è¯»å–æ–‡ä»¶\nNSString *name = [userDefaults objectForKey:@&quot;obj&quot;];\nBOOL sex = [userDefaults boolForKey:@&quot;sex&quot;];\nNSInteger age = [userDefaults integerForKey:@&quot;age&quot;];\n\nNSLog(@&quot;%@, %d, %ld&quot;, name, sex, age);\nåå¥½è®¾ç½®æ˜¯ä¸“é—¨ç”¨æ¥ä¿å­˜åº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯çš„ï¼Œä¸€èˆ¬ä¸è¦åœ¨åå¥½è®¾ç½®ä¸­ä¿å­˜å…¶ä»–æ•°æ®ã€‚å¦‚æœæ²¡æœ‰è°ƒç”¨synchronizeæ–¹æ³•ï¼Œç³»ç»Ÿä¼šæ ¹æ®I/Oæƒ…å†µä¸å®šæ—¶åˆ»åœ°ä¿å­˜åˆ°æ–‡ä»¶ä¸­ã€‚æ‰€ä»¥å¦‚æœéœ€è¦ç«‹å³å†™å…¥æ–‡ä»¶çš„å°±å¿…é¡»è°ƒç”¨synchronizeæ–¹æ³•ã€‚åå¥½è®¾ç½®ä¼šå°†æ‰€æœ‰æ•°æ®ä¿å­˜åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚å³preferenceç›®å½•ä¸‹çš„ä¸€ä¸ªä»¥æ­¤åº”ç”¨åŒ…åæ¥å‘½åçš„plistæ–‡ä»¶ã€‚\n\nNSKeyedArchiverï¼ˆå½’æ¡£ï¼‰å½’æ¡£çš„å‰ææ˜¯å¯¹è±¡å¿…é¡»éµå®ˆäº†NSCodingåè®®ï¼Œå¤§å¤šæ•°æ”¯æŒå­˜å‚¨æ•°æ®çš„Foundationå’ŒCocoa Touchéƒ½éµå¾ªäº†NSCodingåè®®ï¼Œ\nå¿…é¡»å®ç°NSCodingåè®®å£°æ˜çš„ä¸¤ä¸ªæ–¹æ³•ï¼š\n\nå°†å¯¹è±¡ç¼–ç åˆ°å½’æ¡£\nè§£ç æ¥è·å–ä¸€ä¸ªå¯¹è±¡\n\néµå¾ªåè®®//1.éµå¾ªNSCodingåè®® \n@interface Person : NSObject &lt;NSCoding&gt;\n\n//2.è®¾ç½®å±æ€§\n@property (strong, nonatomic) UIImage *avatar;\n@property (copy, nonatomic) NSString *name;\n@property (assign, nonatomic) NSInteger age;\n\n@end\nå®ç°åè®®ä¸¤ä¸ªæ–¹æ³•//è§£æ¡£\n- (id)initWithCoder:(NSCoder *)aDecoder {\n  if ([super init]) {\n      self.avatar = [aDecoder decodeObjectForKey:@&quot;avatar&quot;];\n      self.name = [aDecoder decodeObjectForKey:@&quot;name&quot;];\n      self.age = [aDecoder decodeIntegerForKey:@&quot;age&quot;];\n  }\n\n  return self;\n}\n\n//å½’æ¡£\n- (void)encodeWithCoder:(NSCoder *)aCoder {\n  [aCoder encodeObject:self.avatar forKey:@&quot;avatar&quot;];\n  [aCoder encodeObject:self.name forKey:@&quot;name&quot;];\n  [aCoder encodeInteger:self.age forKey:@&quot;age&quot;];\n}\nå¦‚æœéœ€è¦å½’æ¡£çš„ç±»æ˜¯æŸä¸ªè‡ªå®šä¹‰ç±»çš„å­ç±»æ—¶ï¼Œå°±éœ€è¦åœ¨å½’æ¡£å’Œè§£æ¡£ä¹‹å‰å…ˆå®ç°çˆ¶ç±»çš„å½’æ¡£å’Œè§£æ¡£æ–¹æ³•ã€‚å³[super encodeWithCoder:aCoder]å’Œ[super initWithCoder:aDecoder]æ–¹æ³•;\nå½’æ¡£æ–¹æ³•ä½¿ç”¨NSString *file = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).firstObject stringByAppendingPathComponent:@&quot;person.data&quot;]; //æ–‡ä»¶ååŠåç¼€ä»»æ„\n\nPerson *person = [[Person alloc] init];\nperson.avatar = self.avatarView.image;\nperson.name = self.nameField.text;\nperson.age = [self.ageField.text integerValue];\n\n[NSKeyedArchiver archiveRootObject:person toFile:file];\nè§£ç æ¥è·å–å¯¹è±¡NSString *file = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).firstObject stringByAppendingPathComponent:@&quot;person.data&quot;];\n\nPerson *person = [NSKeyedUnarchiver unarchiveObjectWithFile:file];\nif (person) {\n self.avatarView.image = person.avatar;\n self.nameField.text = person.name;\n self.ageField.text = [NSString stringWithFormat:@&quot;%ld&quot;, person.age];\n}\n\nSQLite3ã€CoreDataï¼ˆæ•°æ®åº“ï¼‰ä»¥ä¸Šçš„å­˜å‚¨æ–¹æ³•æœ‰ä¸ªå…±åŒçš„ç¼ºé™·å°±æ˜¯ï¼Œå½“ä½ æƒ³å­˜å‚¨ä¸€æ¡è®°å½•çš„æ—¶å€™ï¼Œä½ éœ€è¦è·å–æ•´ä¸ªæ–‡ä»¶å†…å®¹ï¼Œç„¶åå°†æ–°å†…å®¹è¦†ç›–å­˜å‚¨ï¼Œå½“æ•°æ®é‡åºå¤§çš„æ—¶å€™ï¼Œè¿™æ˜¯å¾ˆä¸åˆ©çš„ã€‚ è¿™æ—¶å€™æˆ‘ä»¬é‡‡ç”¨æ•°æ®åº“å­˜å‚¨ï¼Œ\n\nSQLite3å­—æ®µç±»å‹\n\ninteger : æ•´æ•°\nreal : å®æ•°ï¼ˆæµ®ç‚¹æ•°ï¼‰\ntext : æ–‡æœ¬å­—ç¬¦ä¸²\nblob : äºŒè¿›åˆ¶æ•°æ®ï¼Œæ¯”å¦‚æ–‡ä»¶ï¼Œå›¾ç‰‡ä¹‹ç±»çš„\n\nå®é™…ä¸ŠSQLiteæ˜¯æ— ç±»å‹çš„ã€‚å³ä¸ç®¡ä½ åœ¨åˆ›è¡¨æ—¶æŒ‡å®šçš„å­—æ®µç±»å‹æ˜¯ä»€ä¹ˆï¼Œå­˜å‚¨æ˜¯ä¾ç„¶å¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„æ•°æ®ã€‚è€Œä¸”åœ¨åˆ›è¡¨æ—¶ä¹Ÿå¯ä»¥ä¸æŒ‡å®šå­—æ®µç±»å‹ã€‚SQLiteä¹‹æ‰€ä»¥ä»€ä¹ˆç±»å‹å°±æ˜¯ä¸ºäº†è‰¯å¥½çš„ç¼–ç¨‹è§„èŒƒå’Œæ–¹ä¾¿å¼€å‘äººå‘˜äº¤æµï¼Œæ‰€ä»¥å¹³æ—¶åœ¨ä½¿ç”¨æ—¶æœ€å¥½è®¾ç½®æ­£ç¡®çš„å­—æ®µç±»å‹ï¼ä¸»é”®å¿…é¡»è®¾ç½®æˆinteger\nå¯¼å…¥ä¾èµ–åº“å¹¶ä½¿ç”¨\néœ€è¦æ·»åŠ åº“æ–‡ä»¶ï¼šlibsqlite3.dylibå¹¶å¯¼å…¥ä¸»å¤´æ–‡ä»¶\n/**\n*  æ‰“å¼€æ•°æ®åº“å¹¶åˆ›å»ºä¸€ä¸ªè¡¨\n*/\n- (void)openDatabase {\n\n   //1.è®¾ç½®æ–‡ä»¶å\n   NSString *filename = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).firstObject stringByAppendingPathComponent:@&quot;person.db&quot;];\n\n   //2.æ‰“å¼€æ•°æ®åº“æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–‡ä»¶\n   NSInteger result = sqlite3_open(filename.UTF8String, &amp;_sqlite3);\n   if (result == SQLITE_OK) {\n       NSLog(@&quot;æ‰“å¼€æ•°æ®åº“æˆåŠŸï¼&quot;);\n\n       //3.åˆ›å»ºä¸€ä¸ªæ•°æ®åº“è¡¨\n       char *errmsg = NULL;\n\n       sqlite3_exec(_sqlite3, &quot;CREATE TABLE IF NOT EXISTS t_person(id integer primary key autoincrement, name text, age integer)&quot;, NULL, NULL, &amp;errmsg);\n       if (errmsg) {\n           NSLog(@&quot;é”™è¯¯ï¼š%s&quot;, errmsg);\n       } else {\n           NSLog(@&quot;åˆ›è¡¨æˆåŠŸï¼&quot;);\n       }\n\n   } else {\n       NSLog(@&quot;æ‰“å¼€æ•°æ®åº“å¤±è´¥ï¼&quot;);\n   }\n}\nä½¿ç”¨sqlite3_exec()æ–¹æ³•å¯ä»¥æ‰§è¡Œä»»ä½•SQLè¯­å¥ï¼Œæ¯”å¦‚åˆ›è¡¨ã€æ›´æ–°ã€æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚ä½†æ˜¯ä¸€èˆ¬ä¸ç”¨å®ƒæ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼Œå› ä¸ºå®ƒä¸ä¼šè¿”å›æŸ¥è¯¢åˆ°çš„æ•°æ®ã€‚\n/**\n*  å¾€è¡¨ä¸­æ’å…¥1000æ¡æ•°æ®\n*/\n- (void)insertData {\n\nNSString *nameStr;\nNSInteger age;\nfor (NSInteger i = 0; i &lt; 1000; i++) {\n  nameStr = [NSString stringWithFormat:@&quot;Bourne-%d&quot;, arc4random_uniform(10000)];\n  age = arc4random_uniform(80) + 20;\n\n  NSString *sql = [NSString stringWithFormat:@&quot;INSERT INTO t_person (name, age) VALUES(&apos;%@&apos;, &apos;%ld&apos;)&quot;, nameStr, age];\n\n  char *errmsg = NULL;\n  sqlite3_exec(_sqlite3, sql.UTF8String, NULL, NULL, &amp;errmsg);\n  if (errmsg) {\n      NSLog(@&quot;é”™è¯¯ï¼š%s&quot;, errmsg);\n  }\n}\n\nNSLog(@&quot;æ’å…¥å®Œæ¯•ï¼&quot;);\n}\næŸ¥è¯¢æŒ‡ä»¤\n\nsqlite3_prepare_v2() : æ£€æŸ¥sqlçš„åˆæ³•æ€§\nsqlite3_step() : é€è¡Œè·å–æŸ¥è¯¢ç»“æœï¼Œä¸æ–­é‡å¤ï¼Œç›´åˆ°æœ€åä¸€æ¡è®°å½•\nsqlite3_coloum_xxx() : è·å–å¯¹åº”ç±»å‹çš„å†…å®¹ï¼ŒiColå¯¹åº”çš„å°±æ˜¯SQLè¯­å¥ä¸­å­—æ®µçš„é¡ºåºï¼Œä»0å¼€å§‹ã€‚æ ¹æ®å®é™…æŸ¥è¯¢å­—æ®µçš„å±æ€§ï¼Œä½¿ç”¨sqlite3_column_xxxå–å¾—å¯¹åº”çš„å†…å®¹å³å¯ã€‚\nsqlite3_finalize() : é‡Šæ”¾stmt\n/**\n*  ä»è¡¨ä¸­è¯»å–æ•°æ®åˆ°æ•°ç»„ä¸­\n*/\n- (void)readData {\n   NSMutableArray *mArray = [NSMutableArray arrayWithCapacity:1000];\n   char *sql = &quot;select name, age from t_person;&quot;;\n   sqlite3_stmt *stmt;\n\n   NSInteger result = sqlite3_prepare_v2(_sqlite3, sql, -1, &amp;stmt, NULL);\n   if (result == SQLITE_OK) {\n       while (sqlite3_step(stmt) == SQLITE_ROW) {    \n           char *name = (char *)sqlite3_column_text(stmt, 0);\n           NSInteger age = sqlite3_column_int(stmt, 1);\n           //åˆ›å»ºå¯¹è±¡\n           Person *person = [Person personWithName:[NSString stringWithUTF8String:name] Age:age];\n           [mArray addObject:person];\n       }\n       self.dataList = mArray;\n   }\n   sqlite3_finalize(stmt);\n}\n\n\nå› ä¸ºéƒ½æ˜¯Cè¯­è¨€çš„å‡½æ•°ï¼Œä½¿ç”¨èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œgithubä¸Šå·²ç»æœ‰äººå°è£…äº†ä¸€å¥—æ¡†æ¶ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨èµ·æ¥æ›´åŠ ä¾¿æ·ï¼Œå¢åŠ å¼€å‘æ•ˆç‡ã€‚ æ„Ÿè°¢FMDB \n\nFMDBç®€ä»‹FMDBæ˜¯iOSå¹³å°çš„SQLiteæ•°æ®åº“æ¡†æ¶ï¼Œå®ƒæ˜¯ä»¥OCçš„æ–¹å¼å°è£…äº†SQLiteçš„Cè¯­è¨€APIï¼Œå®ƒç›¸å¯¹äºcocoaè‡ªå¸¦çš„Cè¯­è¨€æ¡†æ¶æœ‰å¦‚ä¸‹çš„ä¼˜ç‚¹:\n\nä½¿ç”¨èµ·æ¥æ›´åŠ é¢å‘å¯¹è±¡ï¼Œçœå»äº†å¾ˆå¤šéº»çƒ¦ã€å†—ä½™çš„Cè¯­è¨€ä»£ç \nå¯¹æ¯”è‹¹æœè‡ªå¸¦çš„Core Dataæ¡†æ¶ï¼Œæ›´åŠ è½»é‡çº§å’Œçµæ´»\næä¾›äº†å¤šçº¿ç¨‹å®‰å…¨çš„æ•°æ®åº“æ“ä½œæ–¹æ³•ï¼Œæœ‰æ•ˆåœ°é˜²æ­¢æ•°æ®æ··ä¹±\n\nFMDBçš„ä¸‰ä¸ªæ ¸å¿ƒç±»ï¼š\n\nFMDatabase\n  ä¸€ä¸ªFMDatabaseå¯¹è±¡å°±ä»£è¡¨ä¸€ä¸ªå•ç‹¬çš„SQLiteæ•°æ®åº“ï¼Œç”¨æ¥æ‰§è¡ŒSQLè¯­å¥\n\nFMResultSet\n  ä½¿ç”¨FMDatabaseæ‰§è¡ŒæŸ¥è¯¢åçš„ç»“æœé›†\n\nFMDatabaseQueue\n  ç”¨äºåœ¨å¤šçº¿ç¨‹ä¸­æ‰§è¡Œå¤šä¸ªæŸ¥è¯¢æˆ–æ›´æ–°ï¼Œå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„\n\n\næ‰“å¼€æ•°æ®åº“\nå’Œcè¯­è¨€æ¡†æ¶ä¸€æ ·ï¼ŒFMDBé€šè¿‡æŒ‡å®šSQLiteæ•°æ®åº“æ–‡ä»¶è·¯å¾„æ¥åˆ›å»ºFMDatabaseå¯¹è±¡ï¼Œä½†FMDBæ›´åŠ å®¹æ˜“ç†è§£ï¼Œä½¿ç”¨èµ·æ¥æ›´å®¹æ˜“ï¼Œä½¿ç”¨ä¹‹å‰ä¸€æ ·éœ€è¦å¯¼å…¥sqlite3.dylibã€‚æ‰“å¼€æ•°æ®åº“æ–¹æ³•å¦‚ä¸‹ï¼š\nNSString *path = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).firstObject stringByAppendingPathComponent:@&quot;person.db&quot;];\n\nFMDatabase *database = [FMDatabase databaseWithPath:path];    \nif (![database open]) {\n    NSLog(@&quot;æ•°æ®åº“æ‰“å¼€å¤±è´¥ï¼&quot;);\n}\nPathçš„å€¼å¯ä»¥ä¼ å…¥ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š\n\nå…·ä½“æ–‡ä»¶è·¯å¾„ï¼Œå¦‚æœä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»º\n\nç©ºå­—ç¬¦ä¸²@&quot;&quot;ï¼Œä¼šåœ¨ä¸´æ—¶ç›®å½•åˆ›å»ºä¸€ä¸ªç©ºçš„æ•°æ®åº“ï¼Œå½“FMDatabaseè¿æ¥å…³é—­æ—¶ï¼Œæ•°æ®åº“æ–‡ä»¶ä¹Ÿè¢«åˆ é™¤\n\nnilï¼Œä¼šåˆ›å»ºä¸€ä¸ªå†…å­˜ä¸­ä¸´æ—¶æ•°æ®åº“ï¼Œå½“FMDatabaseè¿æ¥å…³é—­æ—¶ï¼Œæ•°æ®åº“ä¼šè¢«é”€æ¯\n\n\næ›´æ–°\nåœ¨FMDBä¸­ï¼Œé™¤æŸ¥è¯¢ä»¥å¤–çš„æ‰€æœ‰æ“ä½œï¼Œéƒ½ç§°ä¸ºâ€œæ›´æ–°â€, å¦‚ï¼šcreateã€dropã€insertã€updateã€deleteç­‰æ“ä½œï¼Œä½¿ç”¨executeUpdate:æ–¹æ³•æ‰§è¡Œæ›´æ–°ï¼š\n//å¸¸ç”¨æ–¹æ³•æœ‰ä»¥ä¸‹3ç§ï¼š   \n- (BOOL)executeUpdate:(NSString*)sql, ...\n- (BOOL)executeUpdateWithFormat:(NSString*)format, ...\n- (BOOL)executeUpdate:(NSString*)sql withArgumentsInArray:(NSArray *)arguments\n\n//ç¤ºä¾‹\n[database executeUpdate:@&quot;CREATE TABLE IF NOT EXISTS t_person(id integer primary key autoincrement, name text, age integer)&quot;];   \n\n//æˆ–è€…  \n[database executeUpdate:@&quot;INSERT INTO t_person(name, age) VALUES(?, ?)&quot;, @&quot;Bourne&quot;, [NSNumber numberWithInt:42]];\næŸ¥è¯¢çš„ä¸‰ä¸ªæ–¹æ³•\n- (FMResultSet *)executeQuery:(NSString*)sql, ...\n- (FMResultSet *)executeQueryWithFormat:(NSString*)format, ...\n- (FMResultSet *)executeQuery:(NSString *)sql withArgumentsInArray:(NSArray *)arguments\nä¾‹å¦‚ï¼š \n//1.æ‰§è¡ŒæŸ¥è¯¢\nFMResultSet *result = [database executeQuery:@&quot;SELECT * FROM t_person&quot;];\n\n//2.éå†ç»“æœé›†\nwhile ([result next]) {\n    NSString *name = [result stringForColumn:@&quot;name&quot;];\n    int age = [result intForColumn:@&quot;age&quot;];\n}\nçº¿ç¨‹å®‰å…¨\nåœ¨å¤šä¸ªçº¿ç¨‹ä¸­åŒæ—¶ä½¿ç”¨ä¸€ä¸ªFMDatabaseå®ä¾‹æ˜¯ä¸æ˜æ™ºçš„ã€‚ä¸è¦è®©å¤šä¸ªçº¿ç¨‹åˆ†äº«åŒä¸€ä¸ªFMDatabaseå®ä¾‹ï¼Œå®ƒæ— æ³•åœ¨å¤šä¸ªçº¿ç¨‹ä¸­åŒæ—¶ä½¿ç”¨ã€‚ å¦‚æœåœ¨å¤šä¸ªçº¿ç¨‹ä¸­åŒæ—¶ä½¿ç”¨ä¸€ä¸ªFMDatabaseå®ä¾‹ï¼Œä¼šé€ æˆæ•°æ®æ··ä¹±ç­‰é—®é¢˜ã€‚æ‰€ä»¥ï¼Œè¯·ä½¿ç”¨FMDatabaseQueueï¼Œå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨æ–¹æ³•ï¼š\n//åˆ›å»ºé˜Ÿåˆ—\nFMDatabaseQueue *queue = [FMDatabaseQueue databaseQueueWithPath:aPath];\n\n//ä½¿ç”¨é˜Ÿåˆ—\n[queue inDatabase:^(FMDatabase *database) {    \n      [database executeUpdate:@&quot;INSERT INTO t_person(name, age) VALUES (?, ?)&quot;, @&quot;Bourne_1&quot;, [NSNumber numberWithInt:1]];    \n      [database executeUpdate:@&quot;INSERT INTO t_person(name, age) VALUES (?, ?)&quot;, @&quot;Bourne_2&quot;, [NSNumber numberWithInt:2]];    \n      [database executeUpdate:@&quot;INSERT INTO t_person(name, age) VALUES (?, ?)&quot;, @&quot;Bourne_3&quot;, [NSNumber numberWithInt:3]];      \n\n      FMResultSet *result = [database executeQuery:@&quot;select * from t_person&quot;];    \n     while([result next]) {   \n\n     }    \n}];\næŠŠç®€å•ä»»åŠ¡åŒ…è£…ï¼š\n[queue inTransaction:^(FMDatabase *database, BOOL *rollback) {    \n          [database executeUpdate:@&quot;INSERT INTO t_person(name, age) VALUES (?, ?)&quot;, @&quot;Bourne_1&quot;, [NSNumber numberWithInt:1]];    \n          [database executeUpdate:@&quot;INSERT INTO t_person(name, age) VALUES (?, ?)&quot;, @&quot;Bourne_2&quot;, [NSNumber numberWithInt:2]];    \n          [database executeUpdate:@&quot;INSERT INTO t_person(name, age) VALUES (?, ?)&quot;, @&quot;Bourne_3&quot;, [NSNumber numberWithInt:3]];      \n\n          FMResultSet *result = [database executeQuery:@&quot;select * from t_person&quot;];    \n             while([result next]) {   \n\n             }   \n\n           //å›æ»š\n           *rollback = YES;  \n    }];\nFMDatabaseQueueåå°ä¼šå»ºç«‹ç³»åˆ—åŒ–çš„GCDé˜Ÿåˆ—ï¼Œå¹¶æ‰§è¡Œä½ ä¼ ç»™GCDé˜Ÿåˆ—çš„å—ã€‚è¿™æ„å‘³ç€ ä½ ä»å¤šçº¿ç¨‹åŒæ—¶è°ƒç”¨è°ƒç”¨æ–¹æ³•ï¼ŒGCDä¹Ÿä¼šæŒ‰å®ƒæ¥æ”¶çš„å—çš„é¡ºåºæ¥æ‰§è¡Œã€‚\n\nCoreDataCoreDataå…ˆä¸ä»‹ç»äº†ã€‚é‡çº§æ¯”è¾ƒå¤§ï¼Œä»¥åæœ‰æœºä¼šå†å†™ç›®å‰æ²¡æ€ä¹ˆç”¨è¿‡å“ˆå“ˆğŸ˜€\n","dateCreated":"2015-04-08T13:40:08+08:00","dateModified":"2018-12-17T13:59:22+08:00","datePublished":"2015-04-08T13:40:08+08:00","description":"å¤§å¤šæ•°appåº”ç”¨éƒ½éœ€è¦ä¾é™„å®¢æˆ·ç«¯ç¼“å­˜ï¼Œè¿™å°±æ˜¯æ•°æ®æŒä¹…åŒ–ï¼ŒæŠŠæ•°æ®å­˜åˆ°æ‰‹æœºä¸­ï¼Œappä¸‹æ¬¡é‡å¯æ—¶å€™å¯ä»¥ç›´æ¥è®¿é—®æœ¬åœ°æ•°æ®ï¼Œ","headline":"iOSæ•°æ®æŒä¹…åŒ–","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"http://salmons.info/2015/04/08/æ€»ç»“ç¯‡-iOSæ•°æ®æŒä¹…åŒ–/"},"publisher":{"@type":"Organization","name":"Salmons","sameAs":[],"image":"favicon.ico","logo":{"@type":"ImageObject","url":"favicon.ico"}},"url":"http://salmons.info/2015/04/08/æ€»ç»“ç¯‡-iOSæ•°æ®æŒä¹…åŒ–/"}</script>
    <meta name="description" content="å¤§å¤šæ•°appåº”ç”¨éƒ½éœ€è¦ä¾é™„å®¢æˆ·ç«¯ç¼“å­˜ï¼Œè¿™å°±æ˜¯æ•°æ®æŒä¹…åŒ–ï¼ŒæŠŠæ•°æ®å­˜åˆ°æ‰‹æœºä¸­ï¼Œappä¸‹æ¬¡é‡å¯æ—¶å€™å¯ä»¥ç›´æ¥è®¿é—®æœ¬åœ°æ•°æ®ï¼Œ">
<meta property="og:type" content="blog">
<meta property="og:title" content="iOSæ•°æ®æŒä¹…åŒ–">
<meta property="og:url" content="http://salmons.info/2015/04/08/æ€»ç»“ç¯‡-iOSæ•°æ®æŒä¹…åŒ–/index.html">
<meta property="og:site_name" content="Salmons&#39;s Pool">
<meta property="og:description" content="å¤§å¤šæ•°appåº”ç”¨éƒ½éœ€è¦ä¾é™„å®¢æˆ·ç«¯ç¼“å­˜ï¼Œè¿™å°±æ˜¯æ•°æ®æŒä¹…åŒ–ï¼ŒæŠŠæ•°æ®å­˜åˆ°æ‰‹æœºä¸­ï¼Œappä¸‹æ¬¡é‡å¯æ—¶å€™å¯ä»¥ç›´æ¥è®¿é—®æœ¬åœ°æ•°æ®ï¼Œ">
<meta property="og:locale" content="zh-cn">
<meta property="og:updated_time" content="2018-12-17T05:59:22.392Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOSæ•°æ®æŒä¹…åŒ–">
<meta name="twitter:description" content="å¤§å¤šæ•°appåº”ç”¨éƒ½éœ€è¦ä¾é™„å®¢æˆ·ç«¯ç¼“å­˜ï¼Œè¿™å°±æ˜¯æ•°æ®æŒä¹…åŒ–ï¼ŒæŠŠæ•°æ®å­˜åˆ°æ‰‹æœºä¸­ï¼Œappä¸‹æ¬¡é‡å¯æ—¶å€™å¯ä»¥ç›´æ¥è®¿é—®æœ¬åœ°æ•°æ®ï¼Œ">
    
    
        
    
    
        <meta property="og:image" content="http://salmons.info/assets/images/favicon.ico"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-du2xmrqdqrl2ollgeiw050kpl6l4nbyz7bumjuurjgsxyopifvukebxc9lqe.min.css">
    <!--STYLES END-->
    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">Salmons&#39;s Pool</a>
    </div>
    
        
            <a class="header-right-icon " href="/">
        
        
            <i class="fa fa-home fa-lg"></i>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/favicon.ico" alt="ä½œè€…çš„å›¾ç‰‡">
                </a>
                <h4 class="sidebar-profile-name">Salmons</h4>
                
                    <h5 class="sidebar-profile-bio"><p>life begins at the end of your comfort zone</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/ " title="é¦–é¡µ">
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">é¦–é¡µ</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-archives" title="å½’æ¡£">
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">å½’æ¡£</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-categories" title="åˆ†ç±»">
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">åˆ†ç±»</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-tags" title="æ ‡ç­¾">
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">æ ‡ç­¾</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="#about" title="å…³äº">
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">å…³äº</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://github.com/swifterfit" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://www.instagram.com/swifterfit/" target="_blank" rel="noopener" title="Instagram">
                    
                        <i class="sidebar-button-icon fab fa-instagram" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Instagram</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="mailto:swifterfit@gmail.com" target="_blank" rel="noopener" title="é‚®ç®±">
                    
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">é‚®ç®±</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/atom.xml" title="RSS">
                    
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="5"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            iOSæ•°æ®æŒä¹…åŒ–
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2015-04-08T13:40:08+08:00">
	
		    4æœˆ 08, 2015
    	
    </time>
    
        <span>å‘å¸ƒåœ¨ </span>
        
    <a class="category-link" href="/categories/iOS/">iOS</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>å¤§å¤šæ•°appåº”ç”¨éƒ½éœ€è¦ä¾é™„å®¢æˆ·ç«¯ç¼“å­˜ï¼Œè¿™å°±æ˜¯æ•°æ®æŒä¹…åŒ–ï¼ŒæŠŠæ•°æ®å­˜åˆ°æ‰‹æœºä¸­ï¼Œappä¸‹æ¬¡é‡å¯æ—¶å€™å¯ä»¥ç›´æ¥è®¿é—®æœ¬åœ°æ•°æ®ï¼Œ<br><a id="more"></a><br>ä¾‹å¦‚æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„å¾®ä¿¡èŠå¤©è®°å½•ï¼Œåœ¨æ–­ç½‘æƒ…å†µä¸‹æˆ‘ä»¬ä¾ç„¶å¯ä»¥æŸ¥çœ‹èŠå¤©è®°å½•ï¼Œä»¥ä¸‹æ˜¯iOSæ•°æ®æŒä¹…åŒ–çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li><a href="#plist"><strong>plistæ–‡ä»¶ï¼ˆå±æ€§åˆ—è¡¨ï¼‰</strong></a></li>
<li><a href="#NSUserDefault"><strong>NSUserDefaultï¼ˆåå¥½è®¾ç½®ï¼‰</strong></a></li>
<li><a href="#NSKeyedArchiver"><strong>NSKeyedArchiverï¼ˆå½’æ¡£ï¼‰</strong></a> </li>
<li><a href="#SQLite3ã€CoreData"><strong>SQLite3ã€CoreDataï¼ˆæ•°æ®åº“ï¼‰</strong></a><ul>
<li><a href="#SQLite3"><strong>SQLite3</strong></a></li>
<li><a href="#FMDB"><strong>FMDB</strong></a></li>
<li><a href="#CoreData"><strong>CoreData</strong></a></li>
</ul>
</li>
</ul>
<p>å…ˆä»‹ç»ä¸€ä¸‹æ²™ç›’çš„æ¦‚å¿µï¼ŒiOSç¨‹åºé»˜è®¤æƒ…å†µä¸‹åªèƒ½è®¿é—®ç¨‹åºè‡ªå·±çš„ç›®å½•ï¼Œè¿™ä¸ªç›®å½•å°±å«æ²™ç›’ã€‚</p>
<p>æ²™ç›’çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code>&quot;AppName.appåŒ…&quot;
Documents
Library
    Caches
    Preferences
tmp
</code></pre><p><strong>AppName.app:</strong> è¿™æ˜¯åº”ç”¨ç¨‹åºçš„ç¨‹åºåŒ…ç›®å½•ï¼ŒåŒ…å«åº”ç”¨ç¨‹åºçš„æœ¬èº«ã€‚ç”±äºåº”ç”¨ç¨‹åºå¿…é¡»ç»è¿‡ç­¾åï¼Œæ‰€ä»¥æ‚¨åœ¨è¿è¡Œæ—¶ä¸èƒ½å¯¹è¿™ä¸ªç›®å½•ä¸­çš„å†…å®¹è¿›è¡Œä¿®æ”¹ï¼Œå¦åˆ™å¯èƒ½ä¼šä½¿åº”ç”¨ç¨‹åºæ— æ³•å¯åŠ¨ã€‚</p>
<p><strong>Documents:</strong> æœ€å¸¸ç”¨çš„ç›®å½•ï¼ŒiTunesåŒæ­¥è¯¥åº”ç”¨æ—¶ä¼šåŒæ­¥æ­¤æ–‡ä»¶å¤¹ä¸­çš„å†…å®¹ï¼Œé€‚åˆå­˜å‚¨é‡è¦æ•°æ®ã€‚è·¯å¾„è·å–</p>
<pre><code>NSString *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).firstObject;
</code></pre><p><strong>Library/Caches:</strong> iTunesä¸ä¼šåŒæ­¥æ­¤æ–‡ä»¶å¤¹ï¼Œé€‚åˆå­˜å‚¨ä½“ç§¯å¤§ï¼Œä¸éœ€è¦å¤‡ä»½çš„éé‡è¦æ•°æ®ã€‚</p>
<pre><code>NSString *path = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES).firstObject;
</code></pre><p><strong>Library/Preferences:</strong> iTunesåŒæ­¥è¯¥åº”ç”¨æ—¶ä¼šåŒæ­¥æ­¤æ–‡ä»¶å¤¹ä¸­çš„å†…å®¹ï¼Œé€šå¸¸ä¿å­˜åº”ç”¨çš„è®¾ç½®ä¿¡æ¯ã€‚</p>
<p>åŒ…å«åº”ç”¨ç¨‹åºçš„åå¥½è®¾ç½®æ–‡ä»¶ã€‚æ‚¨ä¸åº”è¯¥ç›´æ¥åˆ›å»ºåå¥½è®¾ç½®æ–‡ä»¶ï¼Œè€Œæ˜¯åº”è¯¥ä½¿ç”¨<code>NSUserDefaults</code>ç±»æ¥å–å¾—å’Œè®¾ç½®åº”ç”¨ç¨‹åºçš„åå¥½.</p>
<p><strong>tmp:</strong> iTunesä¸ä¼šåŒæ­¥æ­¤æ–‡ä»¶å¤¹ï¼Œç³»ç»Ÿå¯èƒ½åœ¨åº”ç”¨æ²¡è¿è¡Œæ—¶å°±åˆ é™¤è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œæ‰€ä»¥æ­¤ç›®å½•é€‚åˆä¿å­˜åº”ç”¨ä¸­çš„ä¸€äº›ä¸´æ—¶æ–‡ä»¶ï¼Œç”¨å®Œå°±åˆ é™¤ã€‚</p>
<pre><code>NSString *path = NSTemporaryDirectory();
</code></pre><p><b id="plist"></b></p>
<h3 id="plistæ–‡ä»¶-å±æ€§åˆ—è¡¨"><a href="#plistæ–‡ä»¶-å±æ€§åˆ—è¡¨" class="headerlink" title="plistæ–‡ä»¶ å±æ€§åˆ—è¡¨"></a>plistæ–‡ä»¶ å±æ€§åˆ—è¡¨</h3><p>plistæ–‡ä»¶æ˜¯å°†ç‰¹å®šç±»é€šè¿‡XMLæ–¹å¼ä¿å­˜åˆ°æ–‡ä»¶çš„</p>
<p>åªæœ‰ä»¥ä¸‹ç±»å‹æ‰èƒ½ä½¿ç”¨plistæ–‡ä»¶å­˜å‚¨ï¼š</p>
<pre><code>NSArray;
NSMutableArray;
NSDictionary;
NSMutableDictionary;
NSData;
NSMutableData;
NSString;
NSMutableString;
NSNumber;
NSDate;

//1.è·å–æ–‡ä»¶è·¯å¾„
NSString *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).firstObject;
NSString *fileName = [path stringByAppendingPathComponent:@&quot;a.plist&quot;];

//2.å­˜å‚¨
//å°†atomicallyè®¾ç½®æˆYESï¼Œä»£è¡¨å…ˆå†™å…¥è¾…åŠ©æ–‡ä»¶ï¼Œå†æŠŠè¾…åŠ©æ–‡ä»¶æ‹·è´åˆ°ç›®æ ‡æ–‡ä»¶åœ°å€ï¼Œå®‰å…¨è€ƒè™‘ï¼Œè®¾ç½®æˆYES
NSArray *array = @[@&quot;123&quot;, @&quot;456&quot;, @&quot;789&quot;];
[array writeToFile:fileName atomically:YES];

//3.è¯»å–
NSArray *result = [NSArray arrayWithContentsOfFile:fileName];
NSLog(@&quot;%@&quot;, result);
</code></pre><p><b id="NSUserDefault"></b></p>
<h3 id="NSUSerDefaultï¼ˆåå¥½è®¾ç½®ï¼‰"><a href="#NSUSerDefaultï¼ˆåå¥½è®¾ç½®ï¼‰" class="headerlink" title="NSUSerDefaultï¼ˆåå¥½è®¾ç½®ï¼‰"></a>NSUSerDefaultï¼ˆåå¥½è®¾ç½®ï¼‰</h3><pre><code>//1.è·å¾—NSUserDefaultsæ–‡ä»¶
NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];

//2.å‘æ–‡ä»¶ä¸­å†™å…¥å†…å®¹,å†™å…¥å¯¹è±¡ï¼ŒåŸºæœ¬ç±»å‹
[userDefaults setObject:@&quot;Object&quot; forKey:@&quot;obj&quot;];
[userDefaults setBool:YES forKey:@&quot;sex&quot;];
[userDefaults setInteger:10 forKey:@&quot;age&quot;];
//2.1ç«‹å³åŒæ­¥
[userDefaults synchronize];

//3.è¯»å–æ–‡ä»¶
NSString *name = [userDefaults objectForKey:@&quot;obj&quot;];
BOOL sex = [userDefaults boolForKey:@&quot;sex&quot;];
NSInteger age = [userDefaults integerForKey:@&quot;age&quot;];

NSLog(@&quot;%@, %d, %ld&quot;, name, sex, age);
</code></pre><p>åå¥½è®¾ç½®æ˜¯ä¸“é—¨ç”¨æ¥ä¿å­˜åº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯çš„ï¼Œä¸€èˆ¬ä¸è¦åœ¨åå¥½è®¾ç½®ä¸­ä¿å­˜å…¶ä»–æ•°æ®ã€‚<br>å¦‚æœæ²¡æœ‰è°ƒç”¨<code>synchronize</code>æ–¹æ³•ï¼Œç³»ç»Ÿä¼šæ ¹æ®I/Oæƒ…å†µä¸å®šæ—¶åˆ»åœ°ä¿å­˜åˆ°æ–‡ä»¶ä¸­ã€‚æ‰€ä»¥å¦‚æœéœ€è¦ç«‹å³å†™å…¥æ–‡ä»¶çš„å°±å¿…é¡»è°ƒç”¨<code>synchronize</code>æ–¹æ³•ã€‚<br>åå¥½è®¾ç½®ä¼šå°†æ‰€æœ‰æ•°æ®ä¿å­˜åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚å³preferenceç›®å½•ä¸‹çš„ä¸€ä¸ªä»¥æ­¤åº”ç”¨åŒ…åæ¥å‘½åçš„plistæ–‡ä»¶ã€‚</p>
<p><b id="NSKeyedArchiver"></b></p>
<h3 id="NSKeyedArchiverï¼ˆå½’æ¡£ï¼‰"><a href="#NSKeyedArchiverï¼ˆå½’æ¡£ï¼‰" class="headerlink" title="NSKeyedArchiverï¼ˆå½’æ¡£ï¼‰"></a>NSKeyedArchiverï¼ˆå½’æ¡£ï¼‰</h3><p>å½’æ¡£çš„å‰ææ˜¯å¯¹è±¡å¿…é¡»éµå®ˆäº†<code>NSCoding</code>åè®®ï¼Œå¤§å¤šæ•°æ”¯æŒå­˜å‚¨æ•°æ®çš„<code>Foundation</code>å’Œ<code>Cocoa Touch</code>éƒ½éµå¾ªäº†<code>NSCoding</code>åè®®ï¼Œ</p>
<p>å¿…é¡»å®ç°<code>NSCoding</code>åè®®å£°æ˜çš„ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<ol>
<li>å°†å¯¹è±¡ç¼–ç åˆ°å½’æ¡£</li>
<li>è§£ç æ¥è·å–ä¸€ä¸ªå¯¹è±¡</li>
</ol>
<h4 id="éµå¾ªåè®®"><a href="#éµå¾ªåè®®" class="headerlink" title="éµå¾ªåè®®"></a>éµå¾ªåè®®</h4><pre><code>//1.éµå¾ªNSCodingåè®® 
@interface Person : NSObject &lt;NSCoding&gt;

//2.è®¾ç½®å±æ€§
@property (strong, nonatomic) UIImage *avatar;
@property (copy, nonatomic) NSString *name;
@property (assign, nonatomic) NSInteger age;

@end
</code></pre><h4 id="å®ç°åè®®ä¸¤ä¸ªæ–¹æ³•"><a href="#å®ç°åè®®ä¸¤ä¸ªæ–¹æ³•" class="headerlink" title="å®ç°åè®®ä¸¤ä¸ªæ–¹æ³•"></a>å®ç°åè®®ä¸¤ä¸ªæ–¹æ³•</h4><pre><code>//è§£æ¡£
- (id)initWithCoder:(NSCoder *)aDecoder {
  if ([super init]) {
      self.avatar = [aDecoder decodeObjectForKey:@&quot;avatar&quot;];
      self.name = [aDecoder decodeObjectForKey:@&quot;name&quot;];
      self.age = [aDecoder decodeIntegerForKey:@&quot;age&quot;];
  }

  return self;
}

//å½’æ¡£
- (void)encodeWithCoder:(NSCoder *)aCoder {
  [aCoder encodeObject:self.avatar forKey:@&quot;avatar&quot;];
  [aCoder encodeObject:self.name forKey:@&quot;name&quot;];
  [aCoder encodeInteger:self.age forKey:@&quot;age&quot;];
}
</code></pre><p>å¦‚æœéœ€è¦å½’æ¡£çš„ç±»æ˜¯æŸä¸ªè‡ªå®šä¹‰ç±»çš„å­ç±»æ—¶ï¼Œå°±éœ€è¦åœ¨å½’æ¡£å’Œè§£æ¡£ä¹‹å‰å…ˆå®ç°çˆ¶ç±»çš„å½’æ¡£å’Œè§£æ¡£æ–¹æ³•ã€‚å³<code>[super encodeWithCoder:aCoder]</code>å’Œ<code>[super initWithCoder:aDecoder]</code>æ–¹æ³•;</p>
<h4 id="å½’æ¡£æ–¹æ³•ä½¿ç”¨"><a href="#å½’æ¡£æ–¹æ³•ä½¿ç”¨" class="headerlink" title="å½’æ¡£æ–¹æ³•ä½¿ç”¨"></a>å½’æ¡£æ–¹æ³•ä½¿ç”¨</h4><pre><code>NSString *file = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).firstObject stringByAppendingPathComponent:@&quot;person.data&quot;]; //æ–‡ä»¶ååŠåç¼€ä»»æ„

Person *person = [[Person alloc] init];
person.avatar = self.avatarView.image;
person.name = self.nameField.text;
person.age = [self.ageField.text integerValue];

[NSKeyedArchiver archiveRootObject:person toFile:file];
</code></pre><h4 id="è§£ç æ¥è·å–å¯¹è±¡"><a href="#è§£ç æ¥è·å–å¯¹è±¡" class="headerlink" title="è§£ç æ¥è·å–å¯¹è±¡"></a>è§£ç æ¥è·å–å¯¹è±¡</h4><pre><code>NSString *file = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).firstObject stringByAppendingPathComponent:@&quot;person.data&quot;];

Person *person = [NSKeyedUnarchiver unarchiveObjectWithFile:file];
if (person) {
 self.avatarView.image = person.avatar;
 self.nameField.text = person.name;
 self.ageField.text = [NSString stringWithFormat:@&quot;%ld&quot;, person.age];
}
</code></pre><p><b id="SQLite3ã€CoreData"></b></p>
<h3 id="SQLite3ã€CoreDataï¼ˆæ•°æ®åº“ï¼‰"><a href="#SQLite3ã€CoreDataï¼ˆæ•°æ®åº“ï¼‰" class="headerlink" title="SQLite3ã€CoreDataï¼ˆæ•°æ®åº“ï¼‰"></a>SQLite3ã€CoreDataï¼ˆæ•°æ®åº“ï¼‰</h3><p>ä»¥ä¸Šçš„å­˜å‚¨æ–¹æ³•æœ‰ä¸ªå…±åŒçš„ç¼ºé™·å°±æ˜¯ï¼Œå½“ä½ æƒ³å­˜å‚¨ä¸€æ¡è®°å½•çš„æ—¶å€™ï¼Œä½ éœ€è¦è·å–æ•´ä¸ªæ–‡ä»¶å†…å®¹ï¼Œç„¶åå°†æ–°å†…å®¹è¦†ç›–å­˜å‚¨ï¼Œå½“æ•°æ®é‡åºå¤§çš„æ—¶å€™ï¼Œè¿™æ˜¯å¾ˆä¸åˆ©çš„ã€‚ è¿™æ—¶å€™æˆ‘ä»¬é‡‡ç”¨æ•°æ®åº“å­˜å‚¨ï¼Œ</p>
<p><b id="SQLite3"></b></p>
<h4 id="SQLite3"><a href="#SQLite3" class="headerlink" title="SQLite3"></a>SQLite3</h4><p><strong>å­—æ®µç±»å‹</strong></p>
<ul>
<li><code>integer</code> : æ•´æ•°</li>
<li><code>real</code> : å®æ•°ï¼ˆæµ®ç‚¹æ•°ï¼‰</li>
<li><code>text</code> : æ–‡æœ¬å­—ç¬¦ä¸²</li>
<li><code>blob</code> : äºŒè¿›åˆ¶æ•°æ®ï¼Œæ¯”å¦‚æ–‡ä»¶ï¼Œå›¾ç‰‡ä¹‹ç±»çš„</li>
</ul>
<p>å®é™…ä¸ŠSQLiteæ˜¯æ— ç±»å‹çš„ã€‚å³ä¸ç®¡ä½ åœ¨åˆ›è¡¨æ—¶æŒ‡å®šçš„å­—æ®µç±»å‹æ˜¯ä»€ä¹ˆï¼Œå­˜å‚¨æ˜¯ä¾ç„¶å¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„æ•°æ®ã€‚è€Œä¸”åœ¨åˆ›è¡¨æ—¶ä¹Ÿå¯ä»¥ä¸æŒ‡å®šå­—æ®µç±»å‹ã€‚SQLiteä¹‹æ‰€ä»¥ä»€ä¹ˆç±»å‹å°±æ˜¯ä¸ºäº†è‰¯å¥½çš„ç¼–ç¨‹è§„èŒƒå’Œæ–¹ä¾¿å¼€å‘äººå‘˜äº¤æµï¼Œæ‰€ä»¥å¹³æ—¶åœ¨ä½¿ç”¨æ—¶æœ€å¥½è®¾ç½®æ­£ç¡®çš„å­—æ®µç±»å‹ï¼ä¸»é”®å¿…é¡»è®¾ç½®æˆ<code>integer</code></p>
<p><strong>å¯¼å…¥ä¾èµ–åº“å¹¶ä½¿ç”¨</strong></p>
<p>éœ€è¦æ·»åŠ åº“æ–‡ä»¶ï¼šlibsqlite3.dylibå¹¶å¯¼å…¥ä¸»å¤´æ–‡ä»¶</p>
<pre><code>/**
*  æ‰“å¼€æ•°æ®åº“å¹¶åˆ›å»ºä¸€ä¸ªè¡¨
*/
- (void)openDatabase {

   //1.è®¾ç½®æ–‡ä»¶å
   NSString *filename = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).firstObject stringByAppendingPathComponent:@&quot;person.db&quot;];

   //2.æ‰“å¼€æ•°æ®åº“æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–‡ä»¶
   NSInteger result = sqlite3_open(filename.UTF8String, &amp;_sqlite3);
   if (result == SQLITE_OK) {
       NSLog(@&quot;æ‰“å¼€æ•°æ®åº“æˆåŠŸï¼&quot;);

       //3.åˆ›å»ºä¸€ä¸ªæ•°æ®åº“è¡¨
       char *errmsg = NULL;

       sqlite3_exec(_sqlite3, &quot;CREATE TABLE IF NOT EXISTS t_person(id integer primary key autoincrement, name text, age integer)&quot;, NULL, NULL, &amp;errmsg);
       if (errmsg) {
           NSLog(@&quot;é”™è¯¯ï¼š%s&quot;, errmsg);
       } else {
           NSLog(@&quot;åˆ›è¡¨æˆåŠŸï¼&quot;);
       }

   } else {
       NSLog(@&quot;æ‰“å¼€æ•°æ®åº“å¤±è´¥ï¼&quot;);
   }
}
</code></pre><p>ä½¿ç”¨<code>sqlite3_exec()</code>æ–¹æ³•å¯ä»¥æ‰§è¡Œä»»ä½•SQLè¯­å¥ï¼Œæ¯”å¦‚åˆ›è¡¨ã€æ›´æ–°ã€æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚ä½†æ˜¯ä¸€èˆ¬ä¸ç”¨å®ƒæ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼Œå› ä¸ºå®ƒä¸ä¼šè¿”å›æŸ¥è¯¢åˆ°çš„æ•°æ®ã€‚</p>
<pre><code>/**
*  å¾€è¡¨ä¸­æ’å…¥1000æ¡æ•°æ®
*/
- (void)insertData {

NSString *nameStr;
NSInteger age;
for (NSInteger i = 0; i &lt; 1000; i++) {
  nameStr = [NSString stringWithFormat:@&quot;Bourne-%d&quot;, arc4random_uniform(10000)];
  age = arc4random_uniform(80) + 20;

  NSString *sql = [NSString stringWithFormat:@&quot;INSERT INTO t_person (name, age) VALUES(&apos;%@&apos;, &apos;%ld&apos;)&quot;, nameStr, age];

  char *errmsg = NULL;
  sqlite3_exec(_sqlite3, sql.UTF8String, NULL, NULL, &amp;errmsg);
  if (errmsg) {
      NSLog(@&quot;é”™è¯¯ï¼š%s&quot;, errmsg);
  }
}

NSLog(@&quot;æ’å…¥å®Œæ¯•ï¼&quot;);
}
</code></pre><p><strong>æŸ¥è¯¢æŒ‡ä»¤</strong></p>
<ul>
<li><code>sqlite3_prepare_v2()</code> : æ£€æŸ¥sqlçš„åˆæ³•æ€§</li>
<li><code>sqlite3_step()</code> : é€è¡Œè·å–æŸ¥è¯¢ç»“æœï¼Œä¸æ–­é‡å¤ï¼Œç›´åˆ°æœ€åä¸€æ¡è®°å½•</li>
<li><code>sqlite3_coloum_xxx()</code> : è·å–å¯¹åº”ç±»å‹çš„å†…å®¹ï¼ŒiColå¯¹åº”çš„å°±æ˜¯SQLè¯­å¥ä¸­å­—æ®µçš„é¡ºåºï¼Œä»0å¼€å§‹ã€‚æ ¹æ®å®é™…æŸ¥è¯¢å­—æ®µçš„å±æ€§ï¼Œä½¿ç”¨<code>sqlite3_column_xxx</code>å–å¾—å¯¹åº”çš„å†…å®¹å³å¯ã€‚</li>
<li><p><code>sqlite3_finalize()</code> : é‡Šæ”¾stmt</p>
<pre><code>/**
*  ä»è¡¨ä¸­è¯»å–æ•°æ®åˆ°æ•°ç»„ä¸­
*/
- (void)readData {
   NSMutableArray *mArray = [NSMutableArray arrayWithCapacity:1000];
   char *sql = &quot;select name, age from t_person;&quot;;
   sqlite3_stmt *stmt;

   NSInteger result = sqlite3_prepare_v2(_sqlite3, sql, -1, &amp;stmt, NULL);
   if (result == SQLITE_OK) {
       while (sqlite3_step(stmt) == SQLITE_ROW) {    
           char *name = (char *)sqlite3_column_text(stmt, 0);
           NSInteger age = sqlite3_column_int(stmt, 1);
           //åˆ›å»ºå¯¹è±¡
           Person *person = [Person personWithName:[NSString stringWithUTF8String:name] Age:age];
           [mArray addObject:person];
       }
       self.dataList = mArray;
   }
   sqlite3_finalize(stmt);
}
</code></pre></li>
</ul>
<p>å› ä¸ºéƒ½æ˜¯<code>C</code>è¯­è¨€çš„å‡½æ•°ï¼Œä½¿ç”¨èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œ<code>github</code>ä¸Šå·²ç»æœ‰äººå°è£…äº†ä¸€å¥—æ¡†æ¶ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨èµ·æ¥æ›´åŠ ä¾¿æ·ï¼Œå¢åŠ å¼€å‘æ•ˆç‡ã€‚ æ„Ÿè°¢<a href="https://github.com/ccgus/fmdb" target="_blank" rel="noopener">FMDB</a> </p>
<p><b id="FMDB"></b></p>
<h4 id="FMDBç®€ä»‹"><a href="#FMDBç®€ä»‹" class="headerlink" title="FMDBç®€ä»‹"></a>FMDBç®€ä»‹</h4><p>FMDBæ˜¯iOSå¹³å°çš„SQLiteæ•°æ®åº“æ¡†æ¶ï¼Œå®ƒæ˜¯ä»¥OCçš„æ–¹å¼å°è£…äº†SQLiteçš„Cè¯­è¨€APIï¼Œå®ƒç›¸å¯¹äº<code>cocoa</code>è‡ªå¸¦çš„Cè¯­è¨€æ¡†æ¶æœ‰å¦‚ä¸‹çš„ä¼˜ç‚¹:</p>
<ul>
<li>ä½¿ç”¨èµ·æ¥æ›´åŠ é¢å‘å¯¹è±¡ï¼Œçœå»äº†å¾ˆå¤šéº»çƒ¦ã€å†—ä½™çš„<code>C</code>è¯­è¨€ä»£ç </li>
<li>å¯¹æ¯”è‹¹æœè‡ªå¸¦çš„<code>Core Data</code>æ¡†æ¶ï¼Œæ›´åŠ è½»é‡çº§å’Œçµæ´»</li>
<li>æä¾›äº†å¤šçº¿ç¨‹å®‰å…¨çš„æ•°æ®åº“æ“ä½œæ–¹æ³•ï¼Œæœ‰æ•ˆåœ°é˜²æ­¢æ•°æ®æ··ä¹±</li>
</ul>
<p><strong>FMDBçš„ä¸‰ä¸ªæ ¸å¿ƒç±»ï¼š</strong></p>
<ul>
<li><p><code>FMDatabase</code></p>
<p>  ä¸€ä¸ª<code>FMDatabase</code>å¯¹è±¡å°±ä»£è¡¨ä¸€ä¸ªå•ç‹¬çš„SQLiteæ•°æ®åº“ï¼Œç”¨æ¥æ‰§è¡ŒSQLè¯­å¥</p>
</li>
<li><p><code>FMResultSet</code></p>
<p>  ä½¿ç”¨<code>FMDatabase</code>æ‰§è¡ŒæŸ¥è¯¢åçš„ç»“æœé›†</p>
</li>
<li><p><code>FMDatabaseQueue</code></p>
<p>  ç”¨äºåœ¨å¤šçº¿ç¨‹ä¸­æ‰§è¡Œå¤šä¸ªæŸ¥è¯¢æˆ–æ›´æ–°ï¼Œå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„</p>
</li>
</ul>
<p><strong>æ‰“å¼€æ•°æ®åº“</strong></p>
<p>å’Œcè¯­è¨€æ¡†æ¶ä¸€æ ·ï¼ŒFMDBé€šè¿‡æŒ‡å®šSQLiteæ•°æ®åº“æ–‡ä»¶è·¯å¾„æ¥åˆ›å»º<code>FMDatabase</code>å¯¹è±¡ï¼Œä½†FMDBæ›´åŠ å®¹æ˜“ç†è§£ï¼Œä½¿ç”¨èµ·æ¥æ›´å®¹æ˜“ï¼Œä½¿ç”¨ä¹‹å‰ä¸€æ ·éœ€è¦å¯¼å…¥<code>sqlite3.dylib</code>ã€‚æ‰“å¼€æ•°æ®åº“æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<pre><code>NSString *path = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).firstObject stringByAppendingPathComponent:@&quot;person.db&quot;];

FMDatabase *database = [FMDatabase databaseWithPath:path];    
if (![database open]) {
    NSLog(@&quot;æ•°æ®åº“æ‰“å¼€å¤±è´¥ï¼&quot;);
}
</code></pre><p>Pathçš„å€¼å¯ä»¥ä¼ å…¥ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š</p>
<ul>
<li><p>å…·ä½“æ–‡ä»¶è·¯å¾„ï¼Œå¦‚æœä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»º</p>
</li>
<li><p>ç©ºå­—ç¬¦ä¸²<code>@&quot;&quot;</code>ï¼Œä¼šåœ¨ä¸´æ—¶ç›®å½•åˆ›å»ºä¸€ä¸ªç©ºçš„æ•°æ®åº“ï¼Œå½“<code>FMDatabase</code>è¿æ¥å…³é—­æ—¶ï¼Œæ•°æ®åº“æ–‡ä»¶ä¹Ÿè¢«åˆ é™¤</p>
</li>
<li><p><code>nil</code>ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå†…å­˜ä¸­ä¸´æ—¶æ•°æ®åº“ï¼Œå½“<code>FMDatabase</code>è¿æ¥å…³é—­æ—¶ï¼Œæ•°æ®åº“ä¼šè¢«é”€æ¯</p>
</li>
</ul>
<p><strong>æ›´æ–°</strong></p>
<p>åœ¨FMDBä¸­ï¼Œé™¤æŸ¥è¯¢ä»¥å¤–çš„æ‰€æœ‰æ“ä½œï¼Œéƒ½ç§°ä¸ºâ€œæ›´æ–°â€, å¦‚ï¼š<code>createã€dropã€insertã€updateã€delete</code>ç­‰æ“ä½œï¼Œä½¿ç”¨<code>executeUpdate:</code>æ–¹æ³•æ‰§è¡Œæ›´æ–°ï¼š</p>
<pre><code>//å¸¸ç”¨æ–¹æ³•æœ‰ä»¥ä¸‹3ç§ï¼š   
- (BOOL)executeUpdate:(NSString*)sql, ...
- (BOOL)executeUpdateWithFormat:(NSString*)format, ...
- (BOOL)executeUpdate:(NSString*)sql withArgumentsInArray:(NSArray *)arguments

//ç¤ºä¾‹
[database executeUpdate:@&quot;CREATE TABLE IF NOT EXISTS t_person(id integer primary key autoincrement, name text, age integer)&quot;];   

//æˆ–è€…  
[database executeUpdate:@&quot;INSERT INTO t_person(name, age) VALUES(?, ?)&quot;, @&quot;Bourne&quot;, [NSNumber numberWithInt:42]];
</code></pre><p><strong>æŸ¥è¯¢çš„ä¸‰ä¸ªæ–¹æ³•</strong></p>
<pre><code>- (FMResultSet *)executeQuery:(NSString*)sql, ...
- (FMResultSet *)executeQueryWithFormat:(NSString*)format, ...
- (FMResultSet *)executeQuery:(NSString *)sql withArgumentsInArray:(NSArray *)arguments
</code></pre><p>ä¾‹å¦‚ï¼š </p>
<pre><code>//1.æ‰§è¡ŒæŸ¥è¯¢
FMResultSet *result = [database executeQuery:@&quot;SELECT * FROM t_person&quot;];

//2.éå†ç»“æœé›†
while ([result next]) {
    NSString *name = [result stringForColumn:@&quot;name&quot;];
    int age = [result intForColumn:@&quot;age&quot;];
}
</code></pre><p><strong>çº¿ç¨‹å®‰å…¨</strong></p>
<p>åœ¨å¤šä¸ªçº¿ç¨‹ä¸­åŒæ—¶ä½¿ç”¨ä¸€ä¸ª<code>FMDatabase</code>å®ä¾‹æ˜¯ä¸æ˜æ™ºçš„ã€‚ä¸è¦è®©å¤šä¸ªçº¿ç¨‹åˆ†äº«åŒä¸€ä¸ª<code>FMDatabase</code>å®ä¾‹ï¼Œå®ƒæ— æ³•åœ¨å¤šä¸ªçº¿ç¨‹ä¸­åŒæ—¶ä½¿ç”¨ã€‚ å¦‚æœåœ¨å¤šä¸ªçº¿ç¨‹ä¸­åŒæ—¶ä½¿ç”¨ä¸€ä¸ª<code>FMDatabase</code>å®ä¾‹ï¼Œä¼šé€ æˆæ•°æ®æ··ä¹±ç­‰é—®é¢˜ã€‚æ‰€ä»¥ï¼Œè¯·ä½¿ç”¨<code>FMDatabaseQueue</code>ï¼Œå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨æ–¹æ³•ï¼š</p>
<pre><code>//åˆ›å»ºé˜Ÿåˆ—
FMDatabaseQueue *queue = [FMDatabaseQueue databaseQueueWithPath:aPath];

//ä½¿ç”¨é˜Ÿåˆ—
[queue inDatabase:^(FMDatabase *database) {    
      [database executeUpdate:@&quot;INSERT INTO t_person(name, age) VALUES (?, ?)&quot;, @&quot;Bourne_1&quot;, [NSNumber numberWithInt:1]];    
      [database executeUpdate:@&quot;INSERT INTO t_person(name, age) VALUES (?, ?)&quot;, @&quot;Bourne_2&quot;, [NSNumber numberWithInt:2]];    
      [database executeUpdate:@&quot;INSERT INTO t_person(name, age) VALUES (?, ?)&quot;, @&quot;Bourne_3&quot;, [NSNumber numberWithInt:3]];      

      FMResultSet *result = [database executeQuery:@&quot;select * from t_person&quot;];    
     while([result next]) {   

     }    
}];
</code></pre><p>æŠŠç®€å•ä»»åŠ¡åŒ…è£…ï¼š</p>
<pre><code>[queue inTransaction:^(FMDatabase *database, BOOL *rollback) {    
          [database executeUpdate:@&quot;INSERT INTO t_person(name, age) VALUES (?, ?)&quot;, @&quot;Bourne_1&quot;, [NSNumber numberWithInt:1]];    
          [database executeUpdate:@&quot;INSERT INTO t_person(name, age) VALUES (?, ?)&quot;, @&quot;Bourne_2&quot;, [NSNumber numberWithInt:2]];    
          [database executeUpdate:@&quot;INSERT INTO t_person(name, age) VALUES (?, ?)&quot;, @&quot;Bourne_3&quot;, [NSNumber numberWithInt:3]];      

          FMResultSet *result = [database executeQuery:@&quot;select * from t_person&quot;];    
             while([result next]) {   

             }   

           //å›æ»š
           *rollback = YES;  
    }];
</code></pre><p><code>FMDatabaseQueue</code>åå°ä¼šå»ºç«‹ç³»åˆ—åŒ–çš„<code>GCD</code>é˜Ÿåˆ—ï¼Œå¹¶æ‰§è¡Œä½ ä¼ ç»™<code>GCD</code>é˜Ÿåˆ—çš„å—ã€‚è¿™æ„å‘³ç€ ä½ ä»å¤šçº¿ç¨‹åŒæ—¶è°ƒç”¨è°ƒç”¨æ–¹æ³•ï¼Œ<code>GCD</code>ä¹Ÿä¼šæŒ‰å®ƒæ¥æ”¶çš„å—çš„é¡ºåºæ¥æ‰§è¡Œã€‚</p>
<p><b id="CoreData"></b></p>
<h4 id="CoreData"><a href="#CoreData" class="headerlink" title="CoreData"></a>CoreData</h4><p><code>CoreData</code>å…ˆä¸ä»‹ç»äº†ã€‚é‡çº§æ¯”è¾ƒå¤§ï¼Œä»¥åæœ‰æœºä¼šå†å†™ç›®å‰æ²¡æ€ä¹ˆç”¨è¿‡å“ˆå“ˆğŸ˜€</p>

            

        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/06/18/Objective-Cç¼–ç è§„èŒƒ-raywenderlich/" data-tooltip="Objective-Cç¼–ç è§„èŒƒ-raywenderlich.com" aria-label="ä¸Šä¸€ç¯‡: Objective-Cç¼–ç è§„èŒƒ-raywenderlich.com">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">ä¸Šä¸€ç¯‡</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/04/01/æ€»ç»“ç¯‡-iOSå¤šçº¿ç¨‹æ–¹æ¡ˆ/" data-tooltip="iOSå¤šçº¿ç¨‹æ–¹æ¡ˆ" aria-label="ä¸‹ä¸€ç¯‡: iOSå¤šçº¿ç¨‹æ–¹æ¡ˆ">
                
                    <span class="hide-xs hide-sm text-small icon-mr">ä¸‹ä¸€ç¯‡</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
        
            
                <li class="post-action">
                    <a class="post-action-btn btn btn--default" href="#disqus_thread">
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2019 Salmons. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/06/18/Objective-Cç¼–ç è§„èŒƒ-raywenderlich/" data-tooltip="Objective-Cç¼–ç è§„èŒƒ-raywenderlich.com" aria-label="ä¸Šä¸€ç¯‡: Objective-Cç¼–ç è§„èŒƒ-raywenderlich.com">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">ä¸Šä¸€ç¯‡</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/04/01/æ€»ç»“ç¯‡-iOSå¤šçº¿ç¨‹æ–¹æ¡ˆ/" data-tooltip="iOSå¤šçº¿ç¨‹æ–¹æ¡ˆ" aria-label="ä¸‹ä¸€ç¯‡: iOSå¤šçº¿ç¨‹æ–¹æ¡ˆ">
                
                    <span class="hide-xs hide-sm text-small icon-mr">ä¸‹ä¸€ç¯‡</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
        
            
                <li class="post-action">
                    <a class="post-action-btn btn btn--default" href="#disqus_thread">
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="5">
    <i id="btn-close-shareoptions" class="fa fa-times"></i>
    <ul class="share-options">
        
    </ul>
</div>

            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/favicon.ico" alt="ä½œè€…çš„å›¾ç‰‡">
        
            <h4 id="about-card-name">Salmons</h4>
        
            <div id="about-card-bio"><p>life begins at the end of your comfort zone</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br>
                <p>Bodybuilder, SE</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br>
                China,Beijing
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-vufjrm3fmbuttogo1hxuu0w9w0sesk5iyysjuguc2hdhufot9szxg8twijry.min.js"></script>
<!--SCRIPTS END-->

    
        <script>
             var disqus_config = function () {
                 this.page.url = 'http://salmons.info/2015/04/08/æ€»ç»“ç¯‡-iOSæ•°æ®æŒä¹…åŒ–/';
                 
                    this.page.identifier = '2015/04/08/æ€»ç»“ç¯‡-iOSæ•°æ®æŒä¹…åŒ–/';
                 
             };
            (function() {
                var d = document, s = d.createElement('script');
                var disqus_shortname = 'Salmons';
                s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>
    



    </body>
</html>
